(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{390:function(e,t,a){"use strict";a.r(t);var s=a(19),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"get-started-with-fluid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get-started-with-fluid"}},[e._v("#")]),e._v(" Get Started With Fluid")]),e._v(" "),t("p",[e._v("This document mainly describes how to deploy Fluid with Helm, and use Fluid to create a dataset and speed up your application.")]),e._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Kubernetes 1.14+")]),e._v(" "),t("p",[e._v("If you don't have a Kubernetes now, we highly recommend you use a cloud Kubernetes service. Usually, with a few steps, you can get your own Kubernetes Cluster. Here's some of the certified cloud Kubernetes services:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://aws.amazon.com/eks/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon Elastic Kubernetes Service"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://cloud.google.com/kubernetes-engine/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google Kubernetes Engine"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/aks/tutorial-kubernetes-deploy-cluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Kubernetes Service"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.aliyun.com/product/kubernetes",target:"_blank",rel:"noopener noreferrer"}},[e._v("Aliyun Container Service for Kubernetes"),t("OutboundLink")],1)])]),e._v(" "),t("blockquote",[t("p",[e._v("Note: While convenient, Minikube is not recommended to deploy Fluid due to its limited functionalities.")])])]),e._v(" "),t("li",[t("p",[e._v("Kubectl 1.14+")]),e._v(" "),t("p",[e._v("Please make sure your kubectl is properly configured to interact with your Kubernetes environment.")])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://helm.sh/docs/intro/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helm 3"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("In the following steps, we'll deploy Fluid with Helm 3")])])]),e._v(" "),t("h2",{attrs:{id:"deploy-fluid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-fluid"}},[e._v("#")]),e._v(" Deploy Fluid")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Create namespace for Fluid")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ kubectl create ns fluid-system\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Download the latest Fluid from Github "),t("a",{attrs:{href:"https://github.com/fluid-cloudnative/fluid/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("release page"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[e._v("Deploy Fluid with Helm")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ helm "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" fluid fluid-"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(".tgz\nNAME: fluid\nLAST DEPLOYED: Tue Jul  "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("7")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(":22:07 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2020")]),e._v("\nNAMESPACE: default\nSTATUS: deployed\nREVISION: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\nTEST SUITE: None\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Check running status of Fluid")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ kubectl get po -n fluid-system\nNAME                                         READY   STATUS    RESTARTS   AGE\nalluxioruntime-controller-64948b68c9-zzsx2   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          108s\ncsi-nodeplugin-fluid-2mfcr                   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("/2     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          108s\ncsi-nodeplugin-fluid-l7lv6                   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("/2     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          108s\ndataset-controller-5465c4bbf9-5ds5p          "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          108s\n")])])])])]),e._v(" "),t("h2",{attrs:{id:"create-a-dataset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-dataset"}},[e._v("#")]),e._v(" Create a Dataset")]),e._v(" "),t("p",[e._v("Fluid provides cloud-native data acceleration and management capabilities, and use "),t("em",[e._v("dataset")]),e._v(" as a high-level abstraction to facilitate user management. Here we will show you how to create a dataset with Fluid.")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Create a Dataset object through the CRD file, which describes the source of the dataset.")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ cat"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("dataset.yaml")]),e._v("\napiVersion: data.fluid.io/v1alpha1\nkind: Dataset\nmetadata:\n  name: demo\nspec:\n  mounts:\n    - mountPoint: https://mirrors.bit.edu.cn/apache/spark/\n      name: spark\nEOF")]),e._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("kubectl create -f dataset.yaml\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Create an "),t("code",[e._v("AlluxioRuntime")]),e._v(" CRD object to support the dataset we created. We use "),t("a",{attrs:{href:"https://www.alluxio.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Alluxio"),t("OutboundLink")],1),e._v(" as its runtime here.")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ cat"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("runtime.yaml")]),e._v('\napiVersion: data.fluid.io/v1alpha1\nkind: AlluxioRuntime\nmetadata:\n  name: demo\nspec:\n  replicas: 1\n  tieredstore:\n    levels:\n      - mediumtype: MEM\n        path: /dev/shm\n        quota: 2Gi\n        high: "0.95"\n        low: "0.7"\nEOF')]),e._v("\n")])])]),t("p",[e._v("Create "),t("em",[e._v("Alluxio")]),e._v(" Runtime with "),t("code",[e._v("kubectl")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("kubectl create -f runtime.yaml  \n")])])])]),e._v(" "),t("li",[t("p",[e._v("Next, we create an application to access this dataset. Here we will access the same data multiple times and compare the time consumed by each access.")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ cat"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("app.yaml")]),e._v("\napiVersion: v1\nkind: Pod\nmetadata:\n  name: demo-app\nspec:\n  containers:\n    - name: demo\n      image: nginx\n      volumeMounts:\n        - mountPath: /data\n          name: demo\n  volumes:\n    - name: demo\n      persistentVolumeClaim:\n        claimName: demo\nEOF")]),e._v("\n")])])]),t("p",[e._v("Create Pod with "),t("code",[e._v("kubectl")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ kubectl create -f app.yaml\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Dive into the container to access data, the first access will take longer.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kubectl exec -it demo-app -- bash\n$ du -sh /data/spark/spark-3.0.1-bin-without-hadoop.tgz\n150M\t/data/spark/spark-3.0.1-bin-without-hadoop.tgz\n$ time cp /data/spark/spark-3.0.1-bin-without-hadoop.tgz /dev/null\nreal\t0m13.171s\nuser\t0m0.002s\nsys\t0m0.028s\n")])])])]),e._v(" "),t("li",[t("p",[e._v("In order to avoid the influence of other factors like page cache, we will delete the previous container, create the same application, and try to access the same file. Since the file has been cached by alluxio at this time, you can see that it takes significantly less time now.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ kubectl delete -f app.yaml && kubectl create -f app.yaml\n$ kubectl exec -it demo-app -- bash\n$ time cp /data/spark/spark-3.0.1-bin-without-hadoop.tgz /dev/null\nreal\t0m0.344s\nuser\t0m0.002s\nsys\t0m0.020s\n")])])])])]),e._v(" "),t("p",[e._v("We've created a dataset and did some management in a very simple way. For more detail about Fluid, we provide several sample docs for you:")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/samples/"}},[e._v("Speed Up Accessing Remote Files")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/samples/data_co_locality.html"}},[e._v("Cache Co-locality for Workload Scheduling")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/samples/machinelearning.html"}},[e._v("Accelerate Machine Learning Training with Fluid")])],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);